framework:
    messenger:
        failure_transport: failed

        transports:
            subscribe:
                serializer: app.serializer.messenger.external_json_serializer
                dsn: "%env(MESSENGER_TRANSPORT_DSN)%"
                options:
                    exchange:
                        name: subscribe
                        type: direct
                        default_publish_routing_key: subscribe
                    queues:
                        messages:
                            binding_keys: [ subscribe ]

            failed:
                dsn: "%env(MESSENGER_TRANSPORT_DSN_FAILED)%"

        buses:
            app.command_bus: ~
            app.event_bus:
                default_middleware: allow_no_handlers

        default_bus: app.command_bus

        routing:
            'App\Messenger\Contract\MessageInterface': subscribe
